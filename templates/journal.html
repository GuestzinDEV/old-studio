{% extends "base.html" %}
{% block content %}

<div class="journal-layout">

    <!-- CONTEÚDO PRINCIPAL -->
    <div class="journal-main box">
        <h2 class="journal-title">Old Studio Developers’ Journal</h2>

        <p class="journal-date">
            {{ current_category }}
        </p>

        {% if posts|length == 0 %}
            <p style="margin-top: 15px;">
                <strong>No updates for now.</strong>
            </p>
        {% else %}
            {% for post in posts %}
                <hr style="margin: 20px 0;">

                <!-- AUTOR -->
                <div style="display:flex; align-items:center; gap:10px;">
                    {% if post.author == "Guestzin" %}
                        <img src="{{ url_for('static', filename='images/guest.png') }}" width="40">
                    {% elif post.author == "Mrc" %}
                        <img src="{{ url_for('static', filename='images/mrc.png') }}" width="40">
                    {% endif %}

                    <div>
                        <strong>{{ post.author }}</strong><br>
                        <span style="font-size:12px; color:#6b6b6b;">
                            {{ post.created_at[:10] }}
                        </span>
                    </div>
                </div>

                <!-- TEXTO -->
                <p style="margin-top:10px;">
                    {{ post.content }}
                </p>
            {% endfor %}
        {% endif %}
    </div>

    <!-- BARRA LATERAL -->
    <aside class="journal-sidebar box">
        <h3>Journal Sections</h3>
        <ul>
            <li><a href="/journal/development">Development Logs</a></li>
            <li><a href="/journal/design">Design Notes</a></li>
            <li><a href="/journal/concepts">Game Concepts</a></li>
            <li><a href="/journal/releases">Release Updates</a></li>
        </ul>
    </aside>

</div>

<!-- FORMULÁRIO (APENAS DEVS) -->
<div class="box" style="margin-top:20px;">
    <h3>Post an Update</h3>

    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}

    <form method="post">
        <input type="password" name="password" placeholder="Password" required><br><br>

        <select name="author" required>
            <option value="Guestzin">Guestzin</option>
            <option value="Mrc">Mrc</option>
        </select><br><br>

        <textarea name="content" rows="4" required></textarea><br><br>

        <button type="submit">Post Update</button>
    </form>
</div>

{% endblock %}