{% extends "base.html" %}
{% block content %}

<div class="journal-layout">

    <div class="journal-main box">
        <h2>Old Studio Developersâ€™ Journal</h2>

        {% if posts|length == 0 %}
            <p><strong>No updates for now.</strong></p>
        {% else %}
            {% for post in posts %}
                <hr>

                <div style="display:flex; gap:10px; align-items:center;">
                    {% if post.author == "Guestzin" %}
                        <img src="{{ url_for('static', filename='images/guest.png') }}" width="40">
                    {% elif post.author == "Mrc" %}
                        <img src="{{ url_for('static', filename='images/mrc.png') }}" width="40">
                    {% endif %}

                    <div>
                        <strong>{{ post.author }}</strong><br>
                        <small>{{ post.created_at[:10] }}</small>
                    </div>
                </div>

                <p>{{ post.content }}</p>
            {% endfor %}
        {% endif %}
    </div>

</div>

<div class="box" style="margin-top:20px;">
    <h3>Post an Update</h3>

    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}

    <form method="post">
        <select name="author" required>
            <option value="Guestzin">Guestzin</option>
            <option value="Mrc">Mrc</option>
        </select><br><br>

        <input type="password" name="password" placeholder="Password" required><br><br>

        <textarea name="content" rows="4" required></textarea><br><br>

        <button type="submit">Post Update</button>
    </form>
</div>

{% endblock %}